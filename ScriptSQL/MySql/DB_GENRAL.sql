-- MySQL Script generated by MySQL Workbench
-- Sat Oct  4 19:15:02 2025
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema TA_PROG3
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema TA_PROG3
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `TA_PROG3` DEFAULT CHARACTER SET utf8 ;
USE `TA_PROG3` ;

-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_CATEGORIA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_CATEGORIA` (
  `CATEGORIA_ID` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(60) NOT NULL,
  PRIMARY KEY (`CATEGORIA_ID`),
  UNIQUE INDEX `DESCRIPCION_UNIQUE` (`DESCRIPCION` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 18
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_CLIENTE_AL_FIADO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_CLIENTE_AL_FIADO` (
  `CLIENTE_ID` INT NOT NULL AUTO_INCREMENT,
  `ALIAS` VARCHAR(40) NOT NULL,
  `NOMBRE` VARCHAR(60) NOT NULL,
  `TELEFONO` VARCHAR(9) NOT NULL,
  `FECHA_DE_PAGO` DATE NOT NULL,
  `ACTIVO` TINYINT NOT NULL,
  PRIMARY KEY (`CLIENTE_ID`),
  UNIQUE INDEX `ALIAS_UNIQUE` (`ALIAS` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 262
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_RAZON_DEVOLUCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_RAZON_DEVOLUCION` (
  `RAZON_DEVOLUCION_ID` INT NOT NULL AUTO_INCREMENT,
  `DESCRIPCION` VARCHAR(60) NOT NULL,
  PRIMARY KEY (`RAZON_DEVOLUCION_ID`),
  UNIQUE INDEX `DESCRIPCION_UNIQUE` (`DESCRIPCION` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 132
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_USUARIO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_USUARIO` (
  `USUARIO_ID` INT NOT NULL AUTO_INCREMENT,
  `USUARIO` VARCHAR(30) NOT NULL,
  `TIPO_USUARIOS` ENUM('ADMINISTRADOR', 'OPERARIO') NOT NULL,
  `CORREO` VARCHAR(45) NOT NULL,
  `CONTRASENHA` VARCHAR(30) NOT NULL,
  `NOMBRE` VARCHAR(60) NOT NULL,
  `TELEFONO` VARCHAR(9) NOT NULL,
  `ACTIVO` TINYINT NOT NULL,
  PRIMARY KEY (`USUARIO_ID`),
  UNIQUE INDEX `USUARIO_OPERARIO_UNIQUE` (`USUARIO` ASC) VISIBLE)
ENGINE = InnoDB
AUTO_INCREMENT = 305
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_DEVOLUCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_DEVOLUCION` (
  `DEVOLUCION_ID` INT NOT NULL AUTO_INCREMENT,
  `TOTAL` DECIMAL(10,2) NOT NULL,
  `FECHA` DATE NOT NULL,
  `USUARIO_ID` INT NOT NULL,
  PRIMARY KEY (`DEVOLUCION_ID`),
  INDEX `fk_BOD_DEVOLUCION_BOD_USUARIO1_idx` (`USUARIO_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOD_DEVOLUCION_BOD_USUARIO1`
    FOREIGN KEY (`USUARIO_ID`)
    REFERENCES `TA_PROG3`.`BOD_USUARIO` (`USUARIO_ID`))
ENGINE = InnoDB
AUTO_INCREMENT = 105
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_PRODUCTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_PRODUCTO` (
  `PRODUCTO_ID` INT NOT NULL AUTO_INCREMENT,
  `CATEGORIA_ID` INT NOT NULL,
  `NOMBRE` VARCHAR(45) NOT NULL,
  `PRECIO_UNITARIO` DECIMAL(10,2) NOT NULL,
  `UNIDAD_MEDIDA` ENUM('KILOGRAMO', 'LITRO', 'UNIDAD') NOT NULL,
  `STOCK` INT NOT NULL,
  `STOCK_MINIMO` INT NOT NULL,
  `ACTIVO` TINYINT NOT NULL,
  PRIMARY KEY (`PRODUCTO_ID`),
  INDEX `fk_BOD_PRODUCTO_BOD_CATEGORIA1_idx` (`CATEGORIA_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOD_PRODUCTO_BOD_CATEGORIA1`
    FOREIGN KEY (`CATEGORIA_ID`)
    REFERENCES `TA_PROG3`.`BOD_CATEGORIA` (`CATEGORIA_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_DETALLE_DEVOLUCION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_DETALLE_DEVOLUCION` (
  `DEVOLUCION_ID` INT NOT NULL,
  `PRODUCTO_ID` INT NOT NULL,
  `SUBTOTAL` DECIMAL(10,2) NOT NULL,
  `CANTIDAD` INT NOT NULL,
  `RAZON_DEVOLUCION_ID` INT NOT NULL,
  INDEX `fk_BOD_DETALLE_FIADO_BOD_DEVOLUCION1_idx` (`DEVOLUCION_ID` ASC) VISIBLE,
  INDEX `fk_BOD_DETALLE_FIADO_BOD_PRODUCTO1_idx` (`PRODUCTO_ID` ASC) VISIBLE,
  INDEX `fk_BOD_DETALLE_DEVOLUCION_BOD_RAZON_DEVOLUCION1_idx` (`RAZON_DEVOLUCION_ID` ASC) VISIBLE,
  PRIMARY KEY (`DEVOLUCION_ID`, `PRODUCTO_ID`),
  CONSTRAINT `fk_BOD_DETALLE_DEVOLUCION_BOD_RAZON_DEVOLUCION1`
    FOREIGN KEY (`RAZON_DEVOLUCION_ID`)
    REFERENCES `TA_PROG3`.`BOD_RAZON_DEVOLUCION` (`RAZON_DEVOLUCION_ID`),
  CONSTRAINT `fk_BOD_DETALLE_FIADO_BOD_DEVOLUCION1`
    FOREIGN KEY (`DEVOLUCION_ID`)
    REFERENCES `TA_PROG3`.`BOD_DEVOLUCION` (`DEVOLUCION_ID`),
  CONSTRAINT `fk_BOD_DETALLE_FIADO_BOD_PRODUCTO1`
    FOREIGN KEY (`PRODUCTO_ID`)
    REFERENCES `TA_PROG3`.`BOD_PRODUCTO` (`PRODUCTO_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_VENTAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_VENTAS` (
  `VENTA_ID` INT NOT NULL AUTO_INCREMENT,
  `TOTAL` DECIMAL(10,2) NOT NULL,
  `METODO_PAGO` ENUM('EFECTIVO', 'TRANSFERENCIA') NOT NULL,
  `FECHA` DATE NOT NULL,
  `USUARIO_ID` INT NOT NULL,
  PRIMARY KEY (`VENTA_ID`),
  INDEX `fk_BOD_VENTAS_BOD_USUARIO1_idx` (`USUARIO_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOD_VENTAS_BOD_USUARIO1`
    FOREIGN KEY (`USUARIO_ID`)
    REFERENCES `TA_PROG3`.`BOD_USUARIO` (`USUARIO_ID`))
ENGINE = InnoDB
AUTO_INCREMENT = 41
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_DETALLE_VENTA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_DETALLE_VENTA` (
  `VENTA_ID` INT NOT NULL,
  `PRODUCTO_ID` INT NOT NULL,
  `SUBTOTAL` DECIMAL(10,2) NOT NULL,
  `CANTIDAD` INT NOT NULL,
  PRIMARY KEY (`VENTA_ID`, `PRODUCTO_ID`),
  INDEX `fk_BOD_DETALLE_VENTA_BOD_VENTAS1_idx` (`VENTA_ID` ASC) VISIBLE,
  INDEX `fk_BOD_DETALLE_VENTA_BOD_PRODUCTO1_idx` (`PRODUCTO_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOD_DETALLE_VENTA_BOD_PRODUCTO1`
    FOREIGN KEY (`PRODUCTO_ID`)
    REFERENCES `TA_PROG3`.`BOD_PRODUCTO` (`PRODUCTO_ID`),
  CONSTRAINT `fk_BOD_DETALLE_VENTA_BOD_VENTAS1`
    FOREIGN KEY (`VENTA_ID`)
    REFERENCES `TA_PROG3`.`BOD_VENTAS` (`VENTA_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_REGISTRO_PAGOS_FIADOS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_REGISTRO_PAGOS_FIADOS` (
  `PAGO_ID` INT NOT NULL AUTO_INCREMENT,
  `USUARIO_ID` INT NOT NULL,
  `CLIENTE_ID` INT NOT NULL,
  `FECHA` DATE NOT NULL,
  `METODO_PAGO` ENUM('EFECTIVO', 'TRANSFERENCIA') NOT NULL,
  `MONTO` DECIMAL(10,2) NOT NULL,
  PRIMARY KEY (`PAGO_ID`),
  INDEX `fk_BOD_REGISTRO_PAGOS_FIADOS_BOD_USUARIO1_idx` (`USUARIO_ID` ASC) VISIBLE,
  INDEX `fk_BOD_REGISTRO_PAGOS_FIADOS_BOD_CLIENTE_AL_FIADO1_idx` (`CLIENTE_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOD_REGISTRO_PAGOS_FIADOS_BOD_CLIENTE_AL_FIADO1`
    FOREIGN KEY (`CLIENTE_ID`)
    REFERENCES `TA_PROG3`.`BOD_CLIENTE_AL_FIADO` (`CLIENTE_ID`),
  CONSTRAINT `fk_BOD_REGISTRO_PAGOS_FIADOS_BOD_USUARIO1`
    FOREIGN KEY (`USUARIO_ID`)
    REFERENCES `TA_PROG3`.`BOD_USUARIO` (`USUARIO_ID`))
ENGINE = InnoDB
AUTO_INCREMENT = 88
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_VENTAS_FIADAS`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_VENTAS_FIADAS` (
  `VENTA_FIADA_ID` INT NOT NULL AUTO_INCREMENT,
  `VENTA_ID` INT NOT NULL,
  `CLIENTE_ID` INT NOT NULL,
  PRIMARY KEY (`VENTA_FIADA_ID`),
  UNIQUE INDEX `VENTA_ID_UNIQUE` (`VENTA_ID` ASC) VISIBLE,
  INDEX `fk_BOD_VENTAS_FIADAS_BOD_VENTAS1_idx` (`VENTA_ID` ASC) VISIBLE,
  INDEX `fk_BOD_VENTAS_FIADAS_BOD_CLIENTE_AL_FIADO1_idx` (`CLIENTE_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOD_VENTAS_FIADAS_BOD_CLIENTE_AL_FIADO1`
    FOREIGN KEY (`CLIENTE_ID`)
    REFERENCES `TA_PROG3`.`BOD_CLIENTE_AL_FIADO` (`CLIENTE_ID`),
  CONSTRAINT `fk_BOD_VENTAS_FIADAS_BOD_VENTAS1`
    FOREIGN KEY (`VENTA_ID`)
    REFERENCES `TA_PROG3`.`BOD_VENTAS` (`VENTA_ID`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `TA_PROG3`.`BOD_HISTORIAL_OPERACIONES`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `TA_PROG3`.`BOD_HISTORIAL_OPERACIONES` (
  `OPERACION_ID` INT NOT NULL AUTO_INCREMENT,
  `TABLA_AFECTADA` VARCHAR(60) NOT NULL,
  `OPERACION` ENUM('INSERCION', 'MODIFICACION', 'ELIMINACION') NOT NULL,
  `FECHA_HORA` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `USUARIO_ID` INT NOT NULL,
  PRIMARY KEY (`OPERACION_ID`),
  UNIQUE INDEX `OPERACION_ID_UNIQUE` (`OPERACION_ID` ASC) VISIBLE,
  INDEX `fk_BOD_HISTORIAL_OPERACIONES_BOD_USUARIO1_idx` (`USUARIO_ID` ASC) VISIBLE,
  CONSTRAINT `fk_BOD_HISTORIAL_OPERACIONES_BOD_USUARIO1`
    FOREIGN KEY (`USUARIO_ID`)
    REFERENCES `TA_PROG3`.`BOD_USUARIO` (`USUARIO_ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
